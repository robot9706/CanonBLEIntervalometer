#ifndef __CANON_BLE__
#define __CANON_BLE__

#include "app_ble.h"

#define CANON_PAIR_SERVICE                0x21, 0xA8, 0xFF, 0x2F, 0x49, 0xD8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00
#define CANON_PAIR_COMMAND_CHARACTERISTIC 0x21, 0xA8, 0xFF, 0x2F, 0x49, 0xD8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x06, 0x00, 0x01, 0x00
#define CANON_PAIR_DATA_CHARACTERISTIC    0x21, 0xa8, 0xff, 0x2f, 0x49, 0xd8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x0a, 0x00, 0x01, 0x00

#define CANON_TRIG_SERVICE                     0x21, 0xa8, 0xff, 0x2f, 0x49, 0xd8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00
#define CANON_TRIG_CHARACTERISTIC              0x21, 0xa8, 0xff, 0x2f, 0x49, 0xd8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x30, 0x00, 0x03, 0x00
#define CANON_TRIG_NOTIFICATION_CHARACTERISTIC 0x21, 0xa8, 0xff, 0x2f, 0x49, 0xd8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x31, 0x00, 0x03, 0x00
#define CANON_TRIG_CONFIG_CHARACTERISTIC       0x21, 0xa8, 0xff, 0x2f, 0x49, 0xd8, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x03, 0x00

typedef void (*simple_callback)();
typedef void (*simple_statue_callback)(bool);

#define PAIR_STATE_BOND (1)
#define PAIR_STATE_REQUEST (2)
#define PAIR_STATE_WAIT (3)
#define PAIR_STATE_INFO (4)
#define PAIR_STATE_DONE (5)
typedef void (*canon_pair_state_callback)(int, bool);

void canon_set_on_connected(simple_callback handler);
void canon_set_pair_state_callback(canon_pair_state_callback handler);
void canon_set_on_disconnected(simple_callback handler);
void canon_set_on_auth(simple_callback handler);

void canon_service_discovery(esp_bt_uuid_t uuid, uint16_t startHandle, uint16_t endHandle);
void canon_discovery_complete(esp_gatt_if_t gatt_if);
void canon_bond_result(bool success);
void canon_char_write_result(bool success);
void canon_chardesc_write_result(bool success);
void canon_char_notify(uint16_t handle, uint8_t* data, uint16_t data_len);
void canon_disconnect();

void canon_start_pair();

void canon_do_connect();
void canon_do_trigger();

#endif